@inherits ComponentCore<SectionComponent>

<MudPaper Class="@($"mb-4 {(Outlined ? "pa-2" : "")}")" Style="background-color: transparent;" Outlined="Outlined" Elevation="0">
    @if (ShowHead)
    {
        <MudToolBar WrapContent="true" Dense="true" Gutters="false" Class="mb-2" Style="min-height: auto;">
            @if (!string.IsNullOrEmpty(IconName))
            {
                <MudIcon Icon="@IconName" Size="Size.Large" Class="@(IsDesktop ? "me-2" : "me-1")" Color="Color"></MudIcon>
            }
            else if (!string.IsNullOrEmpty(IconImage))
            {
                <MudImage Src="@IconImage" Class="@(IsDesktop ? "me-2" : "me-1")" Style="height: 36px; vertical-align: sub;" Alt="@IconImage"></MudImage>
            }
            <MudText Typo="Typo.h2" Color="Color" Class="custom-h1">
                @Title
            </MudText>
            @if (ButtonAction || IsDesktop)
            {
                <MudSpacer></MudSpacer>
            }
            @if (ActionFragment != null)
            {
                <div style="@(ButtonAction || IsDesktop ? "display: contents;" : "width: 100%; display: flex;")">
                    @ActionFragment
                </div>
            }
        </MudToolBar>
        @if (Description.NotEmpty())
        {
            <div style="text-align: justify;" class="mb-2">
                <MudText Typo="Typo.caption" Align="Align.Justify">
                    @Description
                </MudText>
            </div>
        }
    }
    @BodyFragment
</MudPaper>

@code {
    [Parameter][EditorRequired] public string? Title { get; set; }
    [Parameter] public string? Description { get; set; }

    [Parameter] public bool Outlined { get; set; }
    [Parameter] public Color Color { get; set; } = MudBlazor.Color.Primary;

    [Parameter] public string? IconName { get; set; }
    [Parameter] public string? IconImage { get; set; }
    [Parameter] public bool ShowHead { get; set; } = true;

    [Parameter] public RenderFragment? ActionFragment { get; set; }
    [Parameter][EditorRequired] public RenderFragment? BodyFragment { get; set; }

    [Parameter] public bool ButtonAction { get; set; } = true;
    private bool IsDesktop => Breakpoint > Breakpoint.Xs;
}