@page "/"
@page "/index"
@using NS.WEB.Modules.Country.Components
@using NS.WEB.Modules.Country.Core
@using NS.WEB.Modules.Subscription.Core

@inherits PageCore<Index>

@inject AllRegionsApi AllRegionsApi

<SeoHeader Title="@SeoTranslations.AppSubtitle" Description="@SeoTranslations.AppDescription" Url="/" Keywords="@(["country"])"></SeoHeader>
<PageHeader Image="icon/icon-71.png" Title="@SeoTranslations.AppName" Subtitle="@SeoTranslations.AppSubtitle" />

@* <GoogleAdSense Section="@GoogleAdSense.AdUnit.Index"></GoogleAdSense> *@

<NewRenderControl Actions="Actions" Instance="AllRegions" ExpressionEmpty="@((obj) => obj == null || obj.Items.Empty())">
    <MostVisitedCities AllRegions="AllRegions"></MostVisitedCities>
    <GlobalCities AllRegions="AllRegions"></GlobalCities>
    <BestDestinations AllRegions="AllRegions"></BestDestinations>
</NewRenderControl>

<MudGrid Spacing="3">
    <MudItem xs="12" sm="6">
        <PageSection Title="Travel News" Icon="@IconsFA.Solid.Icon("newspaper").Font">
            <ActionFragment>
                <MudIconButton Icon="@IconsFA.Solid.Icon("expand").Font" Variant="Variant.Filled" Color="Color.Primary" Href="@("/news")" Size="AppStateStatic.Size" Disabled="true" />
            </ActionFragment>
            <BodyFragment>
                <FeatureUnavailable></FeatureUnavailable>
            </BodyFragment>
        </PageSection>
    </MudItem>
    <MudItem xs="12" sm="6">
        
    </MudItem>
</MudGrid>

@code {
    private AllRegions? AllRegions { get; set; }
    private ComponentActions<AllRegions?> Actions { get; set; } = new();

    protected override async Task LoadEssentialDataAsync()
    {
        Actions.StartLoading?.Invoke(null);
        AllRegions = await AllRegionsApi.GetAll();
        Actions.FinishLoading?.Invoke(AllRegions);
    }
}
