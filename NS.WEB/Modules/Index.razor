@page "/"
@page "/index"
@using NS.WEB.Modules.Country.Core
@using NS.WEB.Modules.Subscription.Core

@inherits PageCore<Index>
@inject IpInfoApi IpInfoApi

<SeoHeader Title="@SeoTranslations.AppSubtitle" Description="@SeoTranslations.AppDescription" Url="/" Keywords="@(["country"])"></SeoHeader>
<PageHeader Image="icon/icon-71.png" Title="@SeoTranslations.AppName" Subtitle="@SeoTranslations.AppSubtitle" />

@* <GoogleAdSense Section="@GoogleAdSense.AdUnit.Index"></GoogleAdSense> *@

<PageSection Title="Trending Destinations">
    <ActionFragment>
        <MudSelect Value="region" ValueChanged="@((string? vl) => { region = vl; StateHasChanged(); })" Label="Region" FitContent="!IsMobile" Clearable="true" Dense="true"
                   Class="me-2" Variant="Variant.Text">
            @foreach (var item in Countries.GetRegions())
            {
                <MudSelectItem Value="item">@item</MudSelectItem>
            }
        </MudSelect>
    </ActionFragment>
    <BodyFragment>
        <FeatureUnavailable></FeatureUnavailable>
    </BodyFragment>
</PageSection>

<PageSection Title="Best Destinations">
    <ActionFragment>
        <MudSelect T="string" Label="Type" FitContent="true" Dense="true" Variant="Variant.Text" Value="@("Scores")">
            <MudSelectItem Value="@("Scores")">Scores</MudSelectItem>
            <MudSelectItem Value="@("Safer")">Safer</MudSelectItem>
            <MudSelectItem Value="@("Cheaper")">Cheaper</MudSelectItem>
        </MudSelect>
    </ActionFragment>
    <BodyFragment>
        <FeatureUnavailable></FeatureUnavailable>
    </BodyFragment>
</PageSection>

<MudGrid Spacing="3">
    <MudItem xs="12" sm="6">
        <PageSection Title="Travel News" Icon="@IconsFA.Solid.Icon("newspaper").Font">
            <ActionFragment>
                <MudIconButton Icon="@IconsFA.Solid.Icon("expand").Font" Variant="Variant.Filled" Color="Color.Primary" Href="@("/news")" Size="AppStateStatic.Size" Disabled="true" />
            </ActionFragment>
            <BodyFragment>
                <FeatureUnavailable></FeatureUnavailable>
            </BodyFragment>
        </PageSection>
    </MudItem>
    <MudItem xs="12" sm="6">

    </MudItem>
</MudGrid>

@code {
    private List<EnumObjectCountry<NS.Shared.Enums.Country>> Countries { get; set; } = [];

    private string? region;

    private bool IsMobile => Breakpoint <= Breakpoint.Xs;

    private bool SubscriptionAllowed { get; set; } = true;

    protected override void OnInitialized()
    {
        Countries = EnumHelper.GetListCountry<NS.Shared.Enums.Country>();

        base.OnInitialized();
    }
}
